{
  "project_name": "EduResolve AI",
  "industry_context": "EdTech (Education Technology)",
  "api_version": "v1.0",
  "base_url": "https://localhost:8081/api/v1",
  "endpoints": {
    "auth": {
      "register": {
        "method": "POST",
        "path": "/auth/register",
        "description": "Mendaftarkan user baru dan menyimpan rolenya di database.",
        "request_body": {
          "idToken": "string",
          "name": "string",
          "email": "string",
          "role": "string"
        },
        "response_sample": {
          "success": true,
          "data": {
            "user": { "uid": "...", "email": "alex@gmail.com", "name": "Alex", "role": "support_lead" }
          }
        }
      },
      "login": {
        "method": "POST",
        "path": "/auth/login",
        "description": "Verifikasi token Firebase untuk sesi agen.",
        "request_body": {
          "id_token": "string (Firebase JWT)"
        },
        "response_sample": {
          "success": true,
          "data": {
            "user": { "uid": "...", "email": "alex@gmail.com", "name": "Alex", "role": "support_lead" }
          }
        }
      }
    },
    "student": {
      "submit_complaint": {
        "method": "POST",
        "path": "/student/complaints",
        "description": "[NEW] Endpoint untuk mahasiswa. Memicu AI Analysis secara instan saat submit.",
        "request_body": {
          "student_name": "string",
          "text": "string"
        },
        "response_sample": {
          "success": true,
          "message": "pesan berhasil dikirim",
          "ticket_id": "conv-123"
        }
      },
      "get_conversations": {
        "method": "GET",
        "path": "/student/conversations",
        "description": "Mengambil daftar keluhan yang pernah dikirim oleh mahasiswa tersebut.",
        "response_sample": {
          "success": true,
          "data": [
            {
              "id": "conv-123",
              "last_message": "Mohon ditunggu, sedang kami cek...",
              "status": "open",
              "updated_at": "2026-01-31T10:05:00Z"
            }
          ]
        }
      },
      "get_conversation_detail": {
        "method": "GET",
        "path": "/student/conversations/:id",
        "description": "Melihat detail chat dan balasan dari CS.",
        "response_sample": {
          "success": true,
          "data": {
            "id": "conv-123",
            "messages": [
              {
                "sender": "student",
                "text": "Pak, nilai saya error.",
                "timestamp": "2026-01-31T10:00:00Z"
              },
              {
                "sender": "agent",
                "text": "Halo, bisa kirimkan NIM nya?",
                "timestamp": "2026-01-31T10:05:00Z"
              }
            ]
          }
        }
      },
      "reply_conversation": {
        "method": "POST",
        "path": "/student/conversations/:id/reply",
        "description": "Mahasiswa membalas pesan CS.",
        "request_body": {
          "text": "NIM saya 12345 pak."
        },
        "response_sample": {
          "success": true,
          "timestamp": "2026-01-31T10:06:00Z"
        }
      }
    },
    "inbox": {
      "get_conversations": {
        "method": "GET",
        "path": "/conversations?sort_by=priority_score&order=desc",
        "description": "Mengambil daftar pesan. Default urutan berdasarkan Priority Score tertinggi.",
        "response_sample": {
          "conversations": [
            {
              "id": "conv-123",
              "student_name": "Budi Setiawan",
              "last_message": "Aplikasi crash saat submit tugas kuis.",
              "status": "open",
              "ai_analysis": {
                "priority_score": 10,
                "category": "Exam/Assignment",
                "sentiment": "negative",
                "is_processed": true
              },
              "updated_at": "2026-01-17T10:00:00Z"
            }
          ]
        }
      },
      "get_conversation_detail": {
        "method": "GET",
        "path": "/conversations/:id",
        "description": "Detail pesan lengkap dengan ringkasan mendalam dari AI.",
        "response_sample": {
          "id": "conv-123",
          "messages": [{ "sender": "student", "text": "Halo, saya butuh bantuan kuis.", "timestamp": "..." }],
          "ai_analysis": {
            "summary": "Mahasiswa mengalami kendala teknis saat submit kuis di menit terakhir.",
            "category": "Exam/Assignment",
            "priority_score": 10,
            "reason": "Mendekati deadline tugas (< 15 menit).",
            "sentiment": "anxious",
            "is_processed": true
          }
        }
      },
      "reply_conversation": {
        "method": "POST",
        "path": "/conversations/:id/reply",
        "description": "CS mengirim balasan ke mahasiswa. Pesan ditambahkan ke history chat.",
        "request_body": {
          "text": "Terima kasih, laporan Anda sedang kami proses."
        },
        "response_sample": {
          "success": true,
          "timestamp": "2026-01-31T10:00:00Z"
        }
      },
      "get_suggestions": {
        "method": "GET",
        "path": "/conversations/:id/suggestions",
        "description": "Mendapatkan draf jawaban otomatis dari AI.",
        "response_sample": {
          "suggestions": [
            {
              "tone": "Empathetic",
              "content": "Kami mengerti kekhawatiran Anda terkait kuis..."
            },
            {
              "tone": "Formal",
              "content": "Laporan Anda telah diteruskan ke tim IT..."
            }
          ]
        }
      }
    },
    "analytics": {
      "get_overview": {
        "method": "GET",
        "path": "/analytics/overview",
        "description": "Data agregasi untuk dashboard manajerial Alex.",
        "response_sample": {
          "issue_distribution": {
            "Exam/Assignment": 45,
            "Payment & Subs": 12,
            "Technical Issue": 30,
            "Others": 5
          },
          "average_priority_score": 7.85,
          "daily_tickets": [
            { "date": "2026-01-15", "count": 10 },
            { "date": "2026-01-16", "count": 25 },
            { "date": "2026-01-17", "count": 15 },
            { "date": "2026-01-18", "count": 30 },
            { "date": "2026-01-19", "count": 20 },
            { "date": "2026-01-20", "count": 35 },
            { "date": "2026-01-21", "count": 18 }
          ]
        }
      }
    }
  }
}
